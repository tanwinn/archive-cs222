if (self.CavalryLogger) { CavalryLogger.start_js(["L0pfs"]); }

__d("XFriendJewelNotifsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/friendjewel/friendconfirmednotifications/",{alert_ids:{type:"IntVector",required:!0},action:{type:"String",required:!0}})}),null);
__d("FriendConfirmedNotifs",["Arbiter","AsyncRequest","CSS","DataStore","DOM","Event","Parent","RequestsJewelController","XFriendJewelNotifsController","ge","shield"],(function(a,b,c,d,e,f){__p&&__p();function a(a){"use strict";__p&&__p();this.$3=function(){if(!this.$2.length)return;this.$7(this.$2,"mark_read");this.$2=[]}.bind(this);this.$4=function(){};var c=a.close;for(var d=0;d<c.length;++d)b("Event").listen(c[d],"click",this.$1.bind(this));this.$2=a.unread_notifs;this.$2.length&&(b("RequestsJewelController").isOpen()?this.$3():(b("Arbiter").subscribeOnce("requestsJewel/opened",b("shield")(this.$3,this)),b("Arbiter").subscribeOnce("requestsJewel/closed",b("shield")(this.$3,this))));b("Arbiter").subscribeOnce("requestsJewel/closed",b("shield")(this.$4,this));this.$5=a.notifids}a.prototype.$6=function(a){"use strict";var c=!1,d=b("ge")("fbRequestsJewel"),e=b("DOM").find(d,".requestsUnitTitle");a=b("DOM").scry(a,".friendConfirmedNotifsUnitTitle")[0];a||(c=!0,a=b("DOM").find(d,".friendConfirmedNotifsUnitTitle"));c?(b("CSS").show(b("DOM").find(d,".requestsJewelLinks")),b("DOM").replace(a,e)):b("CSS").hide(a)};a.prototype.$1=function(event){"use strict";__p&&__p();var a=event.getTarget(),c,d=[],e=b("Parent").byClass(a,"friendConfirmedNotifsUnitDisaggregated");e&&(d=b("DataStore").get(e,"notifids"),c=e.parentElement.parentElement,b("CSS").hide(e));e=b("Parent").byClass(a,"friendConfirmedNotifsUnitAggregated");e&&(d=b("DataStore").get(e,"notifids"),c=e.parentElement.parentElement,b("CSS").hide(e));for(var a=0;a<d.length;++a){e=this.$5.indexOf(d[a]);e>-1&&this.$5.splice(e,1)}this.$5.length||this.$6(c);this.$7(d,"xout")};a.prototype.$7=function(a,c){"use strict";a=b("XFriendJewelNotifsController").getURIBuilder().setIntVector("alert_ids",a).setString("action",c).getURI();new(b("AsyncRequest"))().setURI(a).send()};e.exports=a}),null);
__d("FriendConfirmedNotifsClickLogging",["AsyncSignal","Event"],(function(a,b,c,d,e,f){a={addClickLoggingListener:function(a,c){b("Event").listen(a,"click",function(){new(b("AsyncSignal"))(c).send()})}};e.exports=a}),null);
/**
 * License: https://www.facebook.com/legal/license/2v2plzJQoTQ/
 */
__d("IntersectionObserverFallback",["FBLogger","TimeSlice","containsNode","getElementRect","performanceNow","setInterval","throttle"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=document.documentElement,h=[];function i(a,b){var c=Math.max(a.top,b.top),d=Math.min(a.bottom,b.bottom),e=Math.max(a.left,b.left);a=Math.min(a.right,b.right);b=a-e;var f=d-c;return b>=0&&f>=0?{top:c,bottom:d,left:e,right:a,width:b,height:f}:void 0}function j(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function k(a){__p&&__p();this.time=a.time;this.target=a.target;this.rootBounds=a.rootBounds;this.boundingClientRect=a.boundingClientRect;this.intersectionRect=a.intersectionRect||j();this.isIntersecting=!!a.intersectionRect;a=this.boundingClientRect;a=a.width*a.height;var b=this.intersectionRect.width*this.intersectionRect.height;a?this.intersectionRatio=b/a:this.intersectionRatio=this.isIntersecting?1:0}function a(a,c){__p&&__p();this.THROTTLE_TIMEOUT=100;this.POLL_INTERVAL=null;this.$12=b("TimeSlice").guard(b("throttle")(function(){var a=this.$14(),c=a?this.$15():j();this.$6.forEach(function(d){var e=d.element,f=b("getElementRect")(e),g=this.$16(e),h=d.entry,i=a&&g&&!this.$2&&this.$17(e,c);d=d.entry=new k({time:b("performanceNow")(),target:e,boundingClientRect:f,rootBounds:c,intersectionRect:i});!h?this.$7.push(d):a&&g?this.$18(h,d)&&this.$7.push(d):h&&h.isIntersecting&&this.$7.push(d)}.bind(this));this.$7.length&&this.$1(this.takeRecords(),this)}.bind(this),this.THROTTLE_TIMEOUT),"IntersectionObserverFallback: checkForIntersections");this.$2=!1;try{window.top.document}catch(a){this.$2=!0}c=c||{};this.$1=a;this.$4=!1;this.$6=[];this.$7=[];this.$8=this.$9(c.rootMargin);this.thresholds=this.$10(c.threshold);this.root=c.root||null;this.rootMargin=this.$8.map(function(a){return a.value+a.unit}).join(" ")}a.prototype.$10=function(a){a=a||[0];Array.isArray(a)||(a=[a]);return a.sort().filter(function(a,b,c){return a!==c[b-1]})};a.prototype.$9=function(a){a=a||"0px";a=a.split(/\s+/).map(function(a){a=/^(-?\d*\.?\d+)(px|%)$/.exec(a);return{value:parseFloat(a[1]),unit:a[2]}});a[1]=a[1]||a[0];a[2]=a[2]||a[0];a[3]=a[3]||a[1];return a};a.prototype.$11=function(){this.$4||(this.$4=!0,this.$12(),this.POLL_INTERVAL?this.$5=b("setInterval")(this.$12,this.POLL_INTERVAL):(window.addEventListener("resize",this.$12),document.addEventListener("scroll",this.$12),"MutationObserver"in window&&(this.$3=new MutationObserver(this.$12),this.$3.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))};a.prototype.$13=function(){this.$4&&(this.$4=!1,this.$5&&(clearInterval(this.$5),this.$5=void 0),window.removeEventListener("resize",this.$12),document.removeEventListener("scroll",this.$12),this.$3&&(this.$3.disconnect(),this.$3=void 0))};a.prototype.$17=function(a,c){__p&&__p();var d=window.getComputedStyle(a);if(!d||d.display=="none")return void 0;d=b("getElementRect")(a);d=d;a=a.parentElement;var e=!1;while(!e){var f=null;a==this.root||a&&a.nodeType!=1?(e=!0,f=c):a&&window.getComputedStyle(a).overflow!="visible"&&(f=b("getElementRect")(a));if(f){d=i(f,d);if(!d)break}a=a&&a.parentElement}return d};a.prototype.$15=function(){var a;if(this.root)a=b("getElementRect")(this.root);else{var c=document.documentElement,d=document.body,e=c&&c.clientWidth||d&&d.clientWidth;c=c&&c.clientHeight||d&&d.clientHeight;a={top:0,left:0,right:e,width:e,bottom:c,height:c}}return this.$19(a)};a.prototype.$19=function(a){var b=this.$8.map(function(b,c){return b.unit=="px"?b.value:b.value*(c%2?a.width:a.height)/100});b={top:a.top-b[0],right:a.right+b[1],bottom:a.bottom+b[2],left:a.left-b[3],width:0,height:0};b.width=b.right-b.left;b.height=b.bottom-b.top;return b};a.prototype.$18=function(a,b){__p&&__p();a=a&&a.isIntersecting?a.intersectionRatio||0:-1;b=b.isIntersecting?b.intersectionRatio||0:-1;if(a===b)return!1;for(var c=0;c<this.thresholds.length;c++){var d=this.thresholds[c];if(d==a||d==b||d<a!==d<b)return!0}return!1};a.prototype.$14=function(){return!this.root||b("containsNode")(g,this.root)};a.prototype.$16=function(a){var c=this.root||g;return b("containsNode")(c,a)};a.prototype.$20=function(){h.indexOf(this)<0&&h.push(this)};a.prototype.$21=function(){var a=h.indexOf(this);a!=-1&&h.splice(a,1)};a.prototype.observe=function(a){__p&&__p();if(!a){b("FBLogger")("io").warn("IntersectionObserverFallback target does not exist");return}if(this.$6.some(function(b){return b.element==a}))return;this.$20();this.$6.push({element:a,entry:null});this.$11();this.$12()};a.prototype.unobserve=function(a){this.$6=this.$6.filter(function(b){return b.element!=a}),this.$6.length||(this.$13(),this.$21())};a.prototype.disconnect=function(){this.$6=[],this.$13(),this.$21()};a.prototype.takeRecords=function(){var a=this.$7.slice();this.$7=[];return a};e.exports=a}),null);
__d("IntersectionObserver",["IntersectionObserverFallback"],(function(a,b,c,d,e,f){"use strict";a="IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype;e.exports=a?window.IntersectionObserver:b("IntersectionObserverFallback")}),null);
__d("InnerStickyArea",["cx","ContextualLayer","CSS","DataStore","DOM","Event","IntersectionObserver","LayerHideOnTransition","Locale","Parent","Scroll","Style","Vector","gkx","removeFromArray"],(function(a,b,c,d,e,f,g){__p&&__p();function h(a){a=b("Parent").byClass(a,"scrollable")||b("Style").getScrollParent(a.parentNode);return a}function a(a){"use strict";var c=h(a);this.node=a;this._extracted=!1;this._placeholder=b("DOM").create("div",{className:"_ptr"});i.getInstance(c).register(this)}a.prototype.update=function(){"use strict";this._extracted?(b("Vector").getElementDimensions(this._placeholder).setElementWidth(this.node),b("Vector").getElementDimensions(this.node).setElementHeight(this._placeholder)):b("Vector").getElementDimensions(this.node).setElementWidth(this.node).setElementHeight(this._placeholder);return this};a.prototype.setExtracted=function(a){"use strict";if(a===this._extracted)return this;a?(this.update(),b("DOM").replace(this.node,this._placeholder)):(b("Style").set(this.node,"height",null),b("Style").set(this.node,"width",null),this._placeholder.parentNode?b("DOM").replace(this._placeholder,this.node):b("DOM").remove(this.node));this._extracted=a;return this};a.prototype.getInlineNode=function(){"use strict";return this._extracted?this._placeholder:this.node};a.prototype.isDisplayed=function(){"use strict";var a=this.getInlineNode();return a.offsetWidth>0&&a.offsetHeight>0};a.prototype.getStickyContainer=function(){"use strict";return this._stickyContainer};a.prototype.updateContainer=function(){"use strict";var a=h(this.node);i.getInstance(a).register(this)};a.prototype.destroy=function(){"use strict";this.getStickyContainer().unregister(this)};a.getStickyContainer=function(a){"use strict";return i.getInstance(h(a))};function i(a){"use strict";this.node=a,this._areas=[],this._fixTarget=null,this._fixedArea=null,this._initialized=!1,this._layer=new(b("ContextualLayer"))({permanent:!0},b("DOM").create("div")).setInsertParent(this.node.parentNode).disableBehavior(b("LayerHideOnTransition")),b("gkx")("678831")?this._observer=null:this._listener=b("Event").listen(a,"scroll",this.update.bind(this)),b("CSS").addClass(a,"_pts"),b("DataStore").set(a,"StickyContainer",this)}i.prototype.isDisplayed=function(){"use strict";return this.node.offsetWidth>0&&this.node.offsetHeight>0};i.prototype.register=function(a){"use strict";a.getStickyContainer()&&a.getStickyContainer().unregister(a);a._stickyContainer=this;this._areas.push(a);b("gkx")("678831")&&(this._observer===null&&(this._observer=new(b("IntersectionObserver"))(function(a){this.update()}.bind(this),{root:this.node,rootMargin:-b("Vector").getElementDimensions(a.node).y+"px 0px 0px 0px",threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]})),this._observer.observe(a.node),this._observer.observe(a._placeholder));this.update();return this};i.prototype.unregister=function(a){"use strict";b("removeFromArray")(this._areas,a),b("gkx")("678831")&&(this._observer!==null&&(this._observer.unobserve(a.node),this._observer.unobserve(a._placeholder))),this.update()};i.prototype.update=function(){"use strict";__p&&__p();if(!this.isDisplayed())return this;var a=null,c=this,d=b("Scroll").getTop(this.node),e;for(var f=0;f<this._areas.length;f++){var g=this._areas[f],h=g.getInlineNode();if(!g.isDisplayed())continue;if(!b("DOM").contains(this.node.parentNode,h))continue;h=h.offsetTop;if(h<=d)(e===void 0||h>e)&&(a=g,e=h);else if(a){var i=b("Vector").getElementDimensions(a.node).y;h-i<d&&(c=g);break}}this._fixedArea===a&&this._fixTarget===c?this._fixedArea&&this._fixedArea.update():(this._fixedArea&&this._fixedArea!==a&&this._unfixArea(this._fixedArea),a&&this._fixAreaTo(a,c),this._fixedArea=a,this._fixTarget=c);return this};i.prototype.destroy=function(){"use strict";b("gkx")("678831")?this._observer!==null&&(this._observer.disconnect(),this._observer=null):(this._listener&&this._listener.remove(),this._listener=null)};i.prototype._fixAreaTo=function(a,c){"use strict";this._layer.hide(),a.setExtracted(!0),c instanceof i?this._layer.setInsertParent(this.node.parentNode).setAlignment(b("Locale").isRTL()?"right":"left").setContext(this.node):this._layer.setInsertParent(this.node).setContext(c.node),this._layer.setContent(a.node).show(),b("CSS").addClass(a.node,"_57kj")};i.prototype._unfixArea=function(a){"use strict";this._layer.hide(),a.setExtracted(!1),b("CSS").removeClass(a.node,"_57kj")};i.getInstance=function(a){"use strict";var c=b("DataStore").get(a,"StickyContainer");return c||new i(a)};e.exports=a}),null);